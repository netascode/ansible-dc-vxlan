{# Auto-generated NDFC DC VXLAN EVPN VRFs config data structure for fabric {{ vxlan.fabric.name }} #}
{% set vrfs = [] %}
{% if MD_Extended.vxlan.multisite.overlay.vrfs is defined and MD_Extended.vxlan.multisite.overlay.vrfs %}
{% set vrfs = MD_Extended.vxlan.multisite.overlay.vrfs %}
{% endif %}
{% for vrf in vrfs %}
- vrf_name: {{ vrf['name'] }}
{# ------------------------------------------------------ #}
{# Properties Section #}
{# ------------------------------------------------------ #}
  vrf_id: {{ vrf['vrf_id'] | default(omit) }}
  vlan_id: {{ vrf['vlan_id'] | default(omit) }}
  netflow_enable: {{ vrf['netflow_enable'] | default(defaults.vxlan.overlay.vrfs.netflow_enable) }}
{% if vrf['netflow_enable'] is defined and vrf['netflow_enable'] | bool %}
  nf_monitor: {{ vrf['netflow_monitor'] }}
{% endif %}
  no_rp: {{ vrf['no_rp'] | default(defaults.vxlan.overlay.vrfs.no_rp) }}
  trm_enable: {{ vrf['trm_enable'] | default(defaults.vxlan.overlay.vrfs.trm_enable) }}
{% if vrf['trm_enable'] is defined and vrf['trm_enable'] | bool %}
  overlay_mcast_group: {{ vrf['overlay_multicast_group'] | default(omit) }}
  rp_address: {{ vrf['rp_address'] | default(omit) }}
  rp_external: {{ vrf['rp_external'] | default(omit) }}
  rp_loopback_id: {{ vrf['rp_loopback_id'] | default(omit) }}
  trm_bgw_msite: {{ vrf['trm_bgw_msite'] | default(defaults.vxlan.overlay.vrfs.trm_bgw_msite) }}
  underlay_mcast_ip: {{ vrf['underlay_mcast_ip'] | default(omit) }}
{% endif %}

{% endfor %}
