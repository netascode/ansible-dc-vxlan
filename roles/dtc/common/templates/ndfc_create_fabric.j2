# This NDFC Fabric Parameter file is auto-generated
# DO NOT EDIT MANUALLY
#
{% set fabric = MD.fabric %}
{% set global = fabric.global %}
{% set vpc = global.vpc %}
{% set underlay = fabric.underlay %}
{% set multicast = underlay.multicast %}
{% set ipv4 = underlay.ipv4 %}
{% set ipv6 = underlay.ipv6 %}
{% set bfd = underlay.bfd %}
{% set bgp = underlay.bgp %}
{% set isis = underlay.isis %}
{% set ospf = underlay.ospf %}
{# ------------------------------------------------------ #}
{# Global Parameters                                      #}
{# ------------------------------------------------------ #}
- FABRIC_NAME: {{ global.name }}
  BGP_AS: {{ global.bgp_asn }}
  FABRIC_TYPE: VXLAN_EVPN
  OVERLAY_MODE: cli
  DEPLOY: True
  GRFIELD_DEBUG_FLAG: Enable
  AAA_REMOTE_IP_ENABLED: False
  ENABLE_FABRIC_VPC_DOMAIN_ID: False
  RR_COUNT: {{ global.route_reflectors | default(defaults.fabric.global.route_reflectors) }}
  ANYCAST_GW_MAC: {{ global.anycast_gateway_mac | default(omit) }}
  DNS_SERVER_IP_LIST: {{ global.dns_servers.ip_address | default(omit) }}
  DNS_SERVER_VRF: {{ global.dns_servers.vrf | default(omit) }}
  NTP_SERVER_IP_LIST: {{ global.ntp_servers.ip_address | default(omit) }}
  NTP_SERVER_VRF: {{ global.ntp_servers.vrf | default(omit) }}
{# ------------------------------------------------------ #}
{# VPC Parameters                                         #}
{# ------------------------------------------------------ #}
  VPC_PEER_LINK_VLAN: {{ vpc.peer_link_vlan | default(omit) }}
  VPC_PEER_KEEP_ALIVE_OPTION: {{ vpc.peer_keep_alive | default(defaults.fabric.global.vpc.peer_keep_alive) }}
  VPC_AUTO_RECOVERY_TIME: {{ vpc.auto_recovery_time | default(defaults.fabric.global.vpc.auto_recovery_time) }}
  VPC_DELAY_RESTORE_TIME: {{ vpc.delay_restore_time | default(defaults.fabric.global.vpc.delay_restore_time) }}
  VPC_PEER_LINK_PO: {{ vpc.peer_link_port_channel_id | default(defaults.fabric.global.vpc.peer_link_port_channel_id) }}
  VPC_DOMAIN_ID_RANGE: {{ vpc.domain_id_range | default(defaults.fabric.global.vpc.domain_id_range) }}
  VPC_DELAY_RESTORE: {{ vpc.delay_restore_time | default(defaults.fabric.global.vpc.delay_restore_time) }}
  ADVERTISE_PIP_BGP: {{ (vpc.advertise_pip | default(defaults.fabric.global.vpc.advertise_pip) | title) }}
{% if (vpc.advertise_pip | default(defaults.fabric.global.vpc.advertise_pip) | title) == 'True' %}
  ADVERTISE_PIP_ON_BORDER: {{ vpc.advertise_pip_border_only | default(defaults.fabric.global.vpc.advertise_pip_border_only) }}
{% endif %}
{# ------------------------------------------------------ #}
{# Underlay General Parameters                            #}
{# ------------------------------------------------------ #}
  BGP_LB_ID: {{ underlay.general.underlay_routing_loopback_id | default(defaults.fabric.underlay.general.underlay_routing_loopback_id) }}
  NVE_LB_ID: {{ underlay.general.underlay_vtep_loopback_id | default(defaults.fabric.underlay.general.underlay_vtep_loopback_id) }}
  FABRIC_MTU: {{ underlay.general.intra_fabric_interface_mtu | default(defaults.fabric.underlay.general.intra_fabric_interface_mtu) }}
  L2_HOST_INTF_MTU: {{ underlay.general.layer2_host_interfacde_mtu | default(defaults.fabric.underlay.general.layer2_host_interfacde_mtu) }}
  HOST_INTF_ADMIN_STATE: {{ underlay.general.unshut_host_interfaces | default(defaults.fabric.underlay.general.unshut_host_interfaces) }}
  FABRIC_INTERFACE_TYPE: {{ underlay.general.fabric_interface_numbering | default(defaults.fabric.underlay.general.fabric_interface_numbering) }}
  SUBNET_TARGET_MASK: {{ underlay.general.subnet_mask | default(defaults.fabric.underlay.general.subnet_mask) }}
  REPLICATION_MODE: {{ underlay.general.replication_mode | default(defaults.fabric.underlay.general.replication_mode) | title }}
  LINK_STATE_ROUTING: {{ underlay.general.routing_protocol | default(defaults.fabric.underlay.general.routing_protocol) }}
  LINK_STATE_ROUTING_TAG: {{ underlay.general.underlay_routing_protocol_tag | default(defaults.fabric.underlay.general.underlay_routing_protocol_tag) }}
  UNDERLAY_IS_V6: {{ (underlay.general.enable_ipv6_underlay | default(defaults.fabric.underlay.general.enable_ipv6_underlay) | title) }}
  STATIC_UNDERLAY_IP_ALLOC: {{ (underlay.general.manual_underlay_allocation | default(defaults.fabric.underlay.general.manual_underlay_allocation) | title)}}
{# ------------------------------------------------------ #}
{# Underlay Multicast Parameters                          #}
{# ------------------------------------------------------ #}
{% if (underlay.general.replication_mode | default(defaults.fabric.underlay.general.replication_mode) | title) == 'Multicast' %}
  MULTICAST_GROUP_SUBNET: {{ multicast.group_subnet | default(defaults.fabric.underlay.multicast.group_subnet) }}
  RP_COUNT: {{ multicast.rendezvous_points | default(defaults.fabric.underlay.multicast.rendezvous_points) }}
  RP_MODE: {{ multicast.rp_mode | default(defaults.fabric.underlay.multicast.rp_mode) }}
  RP_LB_ID: {{ multicast.underlay_rp_loopback_id | default(defaults.fabric.underlay.multicast.underlay_rp_loopback_id) }}
  ENABLE_TRM: {{(multicast.trm_enable | default(defaults.fabric.underlay.multicast.trm_enable) | title) }}
{% if (multicast.trm_enable | default(defaults.fabric.underlay.multicast.trm_enable) | title) == 'True' %}
  L3VNI_MCAST_GROUP: {{ multicast.trm_default_group | default(defaults.fabric.underlay.multicast.trm_default_group) }}
{% endif %}
{% if multicast.rp_mode | default(defaults.fabric.underlay.multicast.rp_mode) == 'bidir' %}
  PHANTOM_RP_LB_ID1: {{ multicast.underlay_primary_rp_loopback_id | default(defaults.fabric.underlay.multicast.underlay_primary_rp_loopback_id) }}
  PHANTOM_RP_LB_ID2: {{ multicast.underlay_backup_rp_loopback_id | default(defaults.fabric.underlay.multicast.underlay_backup_rp_loopback_id) }}
{% if multicast.rendezvous_points | default(defaults.fabric.underlay.multicast.rendezvous_points) == 4 %}
  PHANTOM_RP_LB_ID3: {{ multicast.underlay_second_backup_rp_loopback_id | default(defaults.fabric.underlay.multicast.underlay_second_backup_rp_loopback_id) }}
  PHANTOM_RP_LB_ID4: {{ multicast.underlay_third_backup_rp_loopback_id | default(defaults.fabric.underlay.multicast.underlay_third_backup_rp_loopback_id) }}
{% endif %}
{% endif %}
{% endif %}
{# ------------------------------------------------------ #}
{# Underlay ISIS Parameters                               #}
{# ------------------------------------------------------ #}
{% if (underlay.general.routing_protocol | default(defaults.fabric.underlay.general.routing_protocol)) == 'is-is' %}
  ISIS_LEVEL: {{ isis.level | default(defaults.fabric.underlay.isis.level) }}
  ISIS_AUTH_ENABLE: {{ (isis.authentication_enable | default(defaults.fabric.underlay.isis.authentication_enable) | title) }}
{% if (isis.authentication_enable | default(defaults.fabric.underlay.isis.authentication_enable) | title) == 'True' %}
  ISIS_AUTH_KEYCHAIN_NAME: {{ isis.authentication_keychain_name | default(omit) }}
  ISIS_AUTH_KEYCHAIN_KEY_ID: {{ isis.authentication_key_id | default(omit) }}
{% endif %}
  ISIS_OVERLOAD_ELAPSE_TIME: {{ isis.overload_bit_elapsed_time | default(defaults.fabric.underlay.isis.overload_bit_elapsed_time) }}
  ISIS_OVERLOAD_ENABLE: {{ isis.overload_bit | default(defaults.fabric.underlay.isis.overload_bit) }}
  ISIS_P2P_ENABLE: {{ isis.network_point_to_point | default(defaults.fabric.underlay.isis.network_point_to_point) }}
{% if (bfd.enable | default(defaults.fabric.underlay.bfd.enable) | title) == 'True' %}
  BFD_ISIS_ENABLE: {{ bfd.isis | default(defaults.fabric.underlay.bfd.isis) }}
{% endif %}
{# ------------------------------------------------------ #}
{# Underlay OSPF Parameters                               #}
{# ------------------------------------------------------ #}
{% elif (underlay.general.routing_protocol | default(defaults.fabric.underlay.general.routing_protocol)) == 'ospf' %}
  OSPF_AREA_ID: {{ ospf.area_id | default(defaults.fabric.underlay.ospf.area_id) }}
  OSPF_AUTH_ENABLE: {{ (ospf.authentication_enable | default(defaults.fabric.underlay.ospf.authentication_enable) | title) }}
{% if (underlay.ospf.authentication_enable | default(defaults.fabric.underlay.ospf.authentication_enable) | title) == 'True' %}
  OSPF_AUTH_KEY_ID: {{ ospf.authentication_key_id | default(omit) }}
  OSPF_AUTH_KEY: {{ ospf.authentication_key | default(omit) }}
{% endif %}
{% if (bfd.enable | default(defaults.fabric.underlay.bfd.enable) | title) == 'True' %}
  BFD_OSPF_ENABLE: {{ bfd.ospf | default(defaults.fabric.underlay.bfd.ospf) }}
{% endif %}
{% endif %}
{# ------------------------------------------------------ #}
{# Underlay IPv4 Parameters                               #}
{# ------------------------------------------------------ #}
{% if (underlay.general.manual_underlay_allocation | default(defaults.fabric.underlay.general.manual_underlay_allocation) | title) == 'False' %}
  LOOPBACK0_IP_RANGE: {{ ipv4.underlay_routing_loopback_ip_range | default(defaults.fabric.underlay.ipv4.underlay_routing_loopback_ip_range) }}
  LOOPBACK1_IP_RANGE: {{ ipv4.underlay_vtep_loopback_ip_range | default(defaults.fabric.underlay.ipv4.underlay_vtep_loopback_ip_range) }}
  SUBNET_RANGE: {{ ipv4.underlay_subnet_ip_range | default(defaults.fabric.underlay.ipv4.underlay_subnet_ip_range) }}
  ANYCAST_RP_IP_RANGE: {{ ipv4.underlay_rp_loopback_ip_range | default(defaults.fabric.underlay.ipv4.underlay_rp_loopback_ip_range) }}
{% endif %}
{# ------------------------------------------------------ #}
{# Underlay IPv6 Parameters                               #}
{# ------------------------------------------------------ #}
{% if (underlay.general.enable_ipv6_underlay | default(defaults.fabric.underlay.general.enable_ipv6_underlay) | title) == 'True' %}
  USE_LINK_LOCAL: {{ ipv6.enable_ipv6_link_local_address | default(defaults.fabric.underlay.ipv6.enable_ipv6_link_local_address | title) }}
{% if (ipv6.enable_ipv6_link_local_address | default(defaults.fabric.underlay.ipv6.enable_ipv6_link_local_address) | title) == 'False' %}
  V6_SUBNET_TARGET_MASK: {{ ipv6.underlay_subnet_mask | default(defaults.fabric.underlay.ipv6.underlay_subnet_mask) }}
{% endif %}
{% endif %}
{# ------------------------------------------------------ #}
{# Underlay BGP Parameters                                #}
{# ------------------------------------------------------ #}
  BGP_AUTH_ENABLE: {{ (bgp.authentication_enable | default(defaults.fabric.underlay.bgp.authentication_enable) | title)}}
{% if (bgp.authentication_enable | default(defaults.fabric.underlay.bgp.authentication_enable) | title) == 'True' %}
  BGP_AUTH_KEY_TYPE: {{ bgp.authentication_key_type | default(omit) }}
  BGP_AUTH_KEY: {{ bgp.authentication_key | default(omit) }}
{% endif %}
{# ------------------------------------------------------ #}
{# Underlay BFD Parameters                                #}
{# ------------------------------------------------------ #}
  BFD_ENABLE: {{ bfd.enable | default(defaults.fabric.underlay.bfd.enable) }}
{% if (bfd.enable | default(defaults.fabric.underlay.bfd.enable) | title) == 'True' %}
  BFD_IBGP_ENABLE: {{ bfd.ibgp | default(defaults.fabric.underlay.bfd.ibgp) }}
  BFD_PIM_ENABLE: {{ bfd.pim | default(defaults.fabric.underlay.bfd.pim) }}
  BFD_AUTH_ENABLE: {{ (bfd.authentication_enable | default(defaults.fabric.underlay.bfd.authentication_enable) | title)}}
{% if (bfd.authentication_enable | default(defaults.fabric.underlay.bfd.authentication_enable) | title) == 'True' %}
  BFD_AUTH_KEY: {{ bfd.authentication_key | default(omit) }}
  BFD_AUTH_KEY_ID: {{ bfd.authentication_key_id | default(omit) }}
{% endif %}
{% endif %}
{# ------------------------------------------------------ #}
{# Overlay Services Parameters                            #}
{# ------------------------------------------------------ #}
  ENABLE_NETFLOW: {{ MD.fabric.overlay_services.vrfs.neflow_enable | default(omit) }}
  NETFLOW_MONITOR_LIST: {{ MD.fabric.overlay_services.vrfs.netflow_monitor | default(omit) }}