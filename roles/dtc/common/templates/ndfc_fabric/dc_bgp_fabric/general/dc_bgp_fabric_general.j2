{# Auto-generated NDFC DC BGP General config data structure for fabric {{ vxlan.fabric.name }} #}
  BGP_AS: "{{ vxlan.global.bgp_asn }}"

{% if vxlan.underlay.bgp.asn_superspines is defined %}
  SUPER_SPINE_BGP_AS: {{ vxlan.underlay.bgp.asn_superspines }}
{% endif %}

  BGP_AS_MODE: {{ vxlan.underlay.bgp.as_mode | default(defaults.vxlan.underlay.bgp.as_mode) }}

{% set as_mode = vxlan.underlay.bgp.as_mode if vxlan.underlay.bgp.as_mode is defined else default(defaults.vxlan.underlay.bgp.as_mode) %}

{% if as_mode == "Same-Tier-AS" %}
{% if vxlan.underlay.bgp.asn_leaves is defined %}
  LEAF_BGP_AS: {{ vxlan.underlay.bgp.asn_leaves }}
{% endif %}
{% if vxlan.underlay.bgp.asn_leaves is defined %}
  BORDER_BGP_AS: {{ vxlan.underlay.bgp.asn_borders }}
{% endif %}
{% endif %}

{% if as_mode == "Multi-AS" %}
  ALLOW_LEAF_SAME_AS: {{ vxlan.underlay.bgp.allow_leaf_same_as | default(defaults.vxlan.underlay.bgp.allow_leaf_same_as) }}
{% endif %}

  UNDERLAY_IS_V6: {{ vxlan.underlay.general.enable_ipv6_underlay | default(defaults.vxlan.underlay.general.enable_ipv6_underlay) | title }}
  STATIC_UNDERLAY_IP_ALLOC: {{ vxlan.underlay.general.manual_underlay_allocation | default(defaults.vxlan.underlay.general.manual_underlay_allocation) | title }}

{% if not (vxlan.underlay.general.enable_ipv6_underlay | default(defaults.vxlan.underlay.general.enable_ipv6_underlay) | ansible.builtin.bool) %}
  SUBNET_TARGET_MASK: {{ vxlan.underlay.ipv4.subnet_mask | default(defaults.vxlan.underlay.ipv4.subnet_mask) }}
{% if not (vxlan.underlay.general.manual_underlay_allocation | default(defaults.vxlan.underlay.general.manual_underlay_allocation) | ansible.builtin.bool) %}
  LOOPBACK0_IP_RANGE: {{ vxlan.underlay.ipv4.underlay_routing_loopback_ip_range | default(defaults.vxlan.underlay.ipv4.underlay_routing_loopback_ip_range) }}
  SUBNET_RANGE: {{ vxlan.underlay.ipv4.underlay_subnet_ip_range | default(defaults.vxlan.underlay.ipv4.underlay_subnet_ip_range) }}
{% endif %}
{% endif %}

{% if (vxlan.underlay.general.enable_ipv6_underlay | default(defaults.vxlan.underlay.general.enable_ipv6_underlay) | ansible.builtin.bool) %}
{% if not (vxlan.underlay.general.manual_underlay_allocation | default(defaults.vxlan.underlay.general.manual_underlay_allocation) | ansible.builtin.bool) %}
  LOOPBACK0_IPV6_RANGE: {{ vxlan.underlay.ipv6.underlay_routing_loopback_ip_range | default(defaults.vxlan.underlay.ipv6.underlay_routing_loopback_ip_range) }}
{% endif %}
{% endif %}

  DISABLE_ROUTE_MAP_TAG: {{ vxlan.underlay.general.disable_rm_tag | default(defaults.vxlan.underlay.general.disable_rm_tag) }}
{% if not (vxlan.underlay.general.disable_rm_tag | default(defaults.vxlan.underlay.general.disable_rm_tag) | ansible.builtin.bool) %}
  ROUTE_MAP_TAG: {{ vxlan.underlay.general.rm_tag | default(defaults.vxlan.underlay.general.rm_tag) }}
{% endif %}
  SUBINTERFACE_RANGE: {{ vxlan.underlay.general.subint_dot1q_range | default(defaults.vxlan.underlay.general.subint_dot1q_range) }}

{# uncomment when Performance Monitoring support is added to the tool#}
{#PM_ENABLE: {{ vxlan.global.enable_performance_monitoring | default(defaults.vxlan.global.enable_performance_monitoring) }} #}