---
# --------------------------------------------------------------------
# Remove all files from the previous run
# --------------------------------------------------------------------
- name: Delete content & directory
  ansible.builtin.file:
    state: absent
    path: "{{ role_path }}/files/"

- name: Recreate the directory
  ansible.builtin.file:
    path: "{{ role_path }}/files/"
    state: directory
    mode: '0755'

- name: Add gitkeep file back to the directory
  ansible.builtin.file:
    path: "{{ role_path }}/files/.gitkeep"
    state: touch
# --------------------------------------------------------------------
# Build Fabric Switch Inventory List From Template
# --------------------------------------------------------------------

- name: Build Fabric Switch Inventory List From Template
  ansible.builtin.include_tasks: inv.yml

# --------------------------------------------------------------------
# Build Fabric VRFs Attach List From Template
# --------------------------------------------------------------------

- name: Build Fabric VRFs List From Template
  ansible.builtin.include_tasks: vrf.yml

# --------------------------------------------------------------------
# Build Fabric Networks Attach List From Template
# --------------------------------------------------------------------

- name: Build Fabric Networks List From Template
  ansible.builtin.include_tasks: network.yml

# --------------------------------------------------------------------
# Build Fabric Loopback Interfaces List From Template
# --------------------------------------------------------------------

- name: Build Fabric Loopback Interfaces List From Template
  ansible.builtin.include_tasks: int_loopback.yml

# --------------------------------------------------------------------
# Build Access Portchannel Interfaces List From Template
# --------------------------------------------------------------------

- name: Build Access Portchannel Interfaces List From Template
  ansible.builtin.include_tasks: int_access_po.yml

# --------------------------------------------------------------------
# Build Trunk Portchannel Interfaces List From Template
# --------------------------------------------------------------------

- name: Build Trunk Portchannel Interfaces List From Template
  ansible.builtin.include_tasks: int_trunk_po.yml

# --------------------------------------------------------------------
# Build Fabric Interface Routed List From Template
# --------------------------------------------------------------------

- name: Build Fabric Interface Routed List From Template
  ansible.builtin.include_tasks: interface_routed.yml

# --------------------------------------------------------------------
# Build Fabric Sub-interface Routed List From Template
# --------------------------------------------------------------------

- name: Build Fabric Sub-interface Routed List From Template
  ansible.builtin.include_tasks: sub_interface_routed.yml

# --------------------------------------------------------------------
# Build Fabric interface Port-Channel Routed List From Template
# --------------------------------------------------------------------

- name: Build Fabric interface Port-Channel Routed List From Template
  ansible.builtin.include_tasks: interface_po_routed.yml
